<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>PueriCalc - Emergência Pediátrica</title>
  <link href="https://fonts.googleapis.com/css?family=Comfortaa:400,700&display=swap" rel="stylesheet"/>
  <style>
    body {
      font-family:'Gotham Book','Comfortaa',Arial,sans-serif;
      padding:20px;
      background:#fff;
      color:#2c3e50;
      margin:0;
    }
    header{text-align:center;margin-bottom:30px;}
    header img{max-width:150px;}
    h1{color:rgb(40,90,129);font-family:'Comfortaa',Arial,sans-serif;text-align:center;margin-bottom:30px;}
    h2{color:rgb(40,90,129);font-family:'Comfortaa',Arial,sans-serif;margin-top:40px;margin-bottom:15px;text-align:center;}
    h3{color:rgb(40,90,129);font-family:'Comfortaa',Arial,sans-serif;margin-top:25px;margin-bottom:8px;}
    label{font-weight:bold;display:block;margin-top:15px;color:rgb(40,90,129);}
    input{
      font-family:'Gotham Book','Comfortaa',Arial,sans-serif;
      padding:10px;
      width:100%;
      margin-top:5px;
      border-radius:4px;
      border:1px solid #ccc;
      background:rgb(185,224,229);
      color:#2c3e50;
      box-sizing:border-box;
    }
    button{
      padding:12px 20px;
      background:rgb(40,90,129);
      color:white;
      font-size:15px;
      font-family:'Comfortaa',Arial,sans-serif;
      border:none;
      border-radius:6px;
      cursor:pointer;
      box-shadow:0 2px 4px rgba(40,90,129,0.2);
      min-width:160px;
    }
    button:hover{background:rgb(185,224,229);color:rgb(40,90,129);}
    .resultado{
      margin-top:20px;
      padding:15px;
      background:#fff;
      border-radius:6px;
      border:1px solid #ccc;
      text-align:center;
    }
    table{
      width:100%;
      border-collapse:collapse;
      background:#fff;
      margin-top:15px;
    }
    th,td{
      border:1px solid #ccc;
      padding:6px 8px;
      text-align:center;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    th{
      background:rgb(40,90,129);
      color:#fff;
      font-family:'Comfortaa',Arial,sans-serif;
    }
    tr.highlight td{background:#ffe089;font-weight:bold;}
    fieldset{
      border:2px solid rgb(185,224,229);
      border-radius:10px;
      margin-top:30px;
      padding:20px;
      background:#f5fafd;
    }
    legend{
      font-weight:bold;
      color:rgb(40,90,129);
      font-family:'Comfortaa',Arial,sans-serif;
      font-size:1.2em;
      padding:0 10px;
    }
    .pcr-row{display:flex;justify-content:space-between;align-items:center;margin:15px 0;}
    .pcr-left{display:flex;align-items:center;gap:15px;}
    .pcr-right{text-align:right;}
    .timer,.timer2{
      font-weight:bold;
      font-family:monospace;
      font-size:1.4em;
      padding:12px 26px;
      border-radius:6px;
      min-width:160px;
      text-align:center;
    }
    .timer{background:rgb(40,90,129);color:#fff;}
    .timer2{background:rgb(185,224,229);color:#163d55;}
    footer{
      margin-top:40px;
      font-size:12px;
      text-align:center;
      color:#555;
      border-top:1px solid #ccc;
      padding-top:15px;
      font-family:'Comfortaa',Arial,sans-serif;
    }
  </style>
</head>
<body>

<header>
  <img src="IMG_4625.png" alt="Logo Dr. Wevelin Matos" />
</header>

<h1>Emergência Pediátrica</h1>

<label for="inputIdade">Idade (anos):</label>
<input type="number" id="inputIdade" min="0" max="18" step="1" oninput="atualizaTabelas()">
<label for="inputPeso">Peso (kg):</label>
<input type="number" id="inputPeso" min="0" step="0.1" placeholder="Preferencialmente informar peso" oninput="atualizaTabelas()">
<div id="msgPeso" class="info"></div>

<!-- Sessão PCR -->
<fieldset>
  <legend>Parada Cardiorrespiratória (PCR)</legend>
  <div class="pcr-row">
    <div class="pcr-left">
      <button onclick="togglePcrTimer()">Start / Stop</button>
      <span class="timer" id="pcrTimer">00:00</span>
    </div>
  </div>
  <div class="pcr-row">
    <div class="pcr-left">
      <button onclick="startMassageCycle()">Massagem</button>
      <span class="timer2" id="currentMassageTimer">--:--</span>
    </div>
  </div>
  <div class="pcr-row">
    <div class="pcr-left">
      <button onclick="startAdrenalinaCycle()">Adrenalina</button>
      <span class="timer2" id="adrenalinaTimer">--:--</span>
    </div>
  </div>
  <div class="pcr-row">
      <button onclick="finalizarAtendimento()">Finalizar</button>
  </div>
  <div class="pcr-row">
      <button onclick="reiniciarAtendimento()">Reiniciar</button>
  </div>
  <div class="resultado" id="dosePCR"></div>
  <h3>Ciclos de Massagem (2min):</h3>
  <table>
    <thead><tr><th>#</th><th>Início Ciclo (Hora)</th></tr></thead>
    <tbody id="massageLog"></tbody>
  </table>
  <h3>Ciclos de Adrenalina:</h3>
  <table>
    <thead><tr><th>#</th><th>Horário Aplicação</th></tr></thead>
    <tbody id="adrenalinaLog"></tbody>
  </table>
</fieldset>

  <!-- Seções de tabelas -->
<h2>Ressuscitação Cardiopulmonar</h2>
<table>
  <thead>
    <tr>
      <th>Medicamento</th>
      <th>Dose</th>
      <th>Via</th>
      <th>Prescrição Completa</th>
    </tr>
  </thead>
  <tbody id="boxRessuscitacao"></tbody>
</table>

<h2>Intubação Traqueal</h2>
<table>
  <thead>
    <tr>
      <th>Medicamento</th>
      <th>Dose</th>
      <th>Via</th>
      <th>Prescrição Completa</th>
    </tr>
  </thead>
  <tbody id="boxIntubacao"></tbody>
</table>

<h2>Sedação / Analgesia</h2>
<table>
  <thead>
    <tr>
      <th>Medicamento</th>
      <th>Dose</th>
      <th>Via</th>
      <th>Prescrição Completa</th>
    </tr>
  </thead>
  <tbody id="boxSedacao"></tbody>
</table>

<h2>Urgências Neurológicas / Convulsão</h2>
<table>
  <thead>
    <tr>
      <th>Medicamento</th>
      <th>Dose</th>
      <th>Via</th>
      <th>Prescrição Completa</th>
    </tr>
  </thead>
  <tbody id="boxUrgencias"></tbody>
</table>

<h2>Distúrbio de Ritmo</h2>
<table>
  <thead>
    <tr>
      <th>Medicamento</th>
      <th>Dose</th>
      <th>Via</th>
      <th>Prescrição Completa</th>
    </tr>
  </thead>
  <tbody id="boxRitmo"></tbody>
</table>

<h2>Sedação em Bomba</h2>
<table>
  <thead>
    <tr>
      <th>Medicamento</th>
      <th>Dose</th>
      <th>Via</th>
      <th>Prescrição Completa</th>
    </tr>
  </thead>
  <tbody id="boxBomba"></tbody>
</table>

<h2>Choques</h2>
<table>
  <thead>
    <tr>
      <th>Medicamento</th>
      <th>Dose</th>
      <th>Via</th>
      <th>Prescrição Completa</th>
    </tr>
  </thead>
  <tbody id="boxChoques"></tbody>
</table>

<h2>Tabela de Procedimentos</h2>
<table>
  <thead>
    <tr>
      <th>Idade</th>
      <th>Lâmina Laringo</th>
      <th>Tubo Traqueal</th>
      <th>Fixação</th>
      <th>Sonda Aspiração</th>
    </tr>
  </thead>
  <tbody id="boxProcedimento"></tbody>
</table>

  <script>
/* ================= Funções Auxiliares ================= */
function parseFormula(formula,peso){
  if(!peso||!formula) return "--";
  let f=formula.replace(/,/g,".").toLowerCase();
  let m=f.match(/peso x ([0-9.]+)/);
  if(m) return (peso*parseFloat(m[1])).toFixed(2).replace(".",",");
  return "--";
}

/* ================= DADOS COMPLETOS ================= */
const dadosTabelas = {
  ressuscitacao: [
    {nome:'Adrenalina 1:1.000 (1mg/ml) – Pediatria',
     dose:"0,01mg/kg - Max 1mg",
     via:'EV/IO',
     formula:'Peso x 0,1',
     prescricao:'Diluir 1mL em 9mL AD e administrar',
     complemento:' mL EV em bolus. Máx 10mL.',
     filtro:p=>p.idade>=1},

    {nome:'PED',
     dose:'0,1mg/kg - Max 2,5mg',
     via:'TOT',
     formula:'Peso x 0,1',
     prescricao:'Diluir 1mL em 9mL AD e administrar',
     complemento:' mL no TOT.',
     filtro:p=>p.idade>=1},

    {nome:'Adrenalina 1:1.000 (1mg/ml) – Neonatologia',
     dose:'0,01 - 0,03mg/kg',
     via:'EV/IO',
     formula:'Peso x 0,1',
     prescricao:'Diluir 1mL em 9mL AD e administrar',
     complemento:' mL em bolus.',
     filtro:p=>p.idade===0},

    {nome:'RN',
     dose:'0,05-0,1mg/kg',
     via:'TOT',
     formula:'Peso x 0,5',
     prescricao:'Diluir 1mL em 9mL AD e administrar',
     complemento:' mL no TOT.',
     filtro:p=>p.idade===0},

    {nome:'Soro fisiológico 0,9%',
     dose:'10-20mL/kg',
     via:'EV/IO',
     formula:'Peso x 10',
     prescricao:'Administrar',
     complemento:' mL de SF0,9% EV livre.',
     filtro:null},

    {nome:'Glicose 25% (0,25g/ml) – Pediatria',
     dose:'0,5-1g/kg',
     via:'EV/IO',
     formula:'Peso x 2',
     prescricao:'Diluir',
     complemento:' mL de SG25% em 1:1 mL de AD e administrar EV em bolus',
     filtro:p=>p.idade>=1},

    {nome:'Glicose 25% (0,25g/ml) – Neonatologia',
     dose:'0,25g/kg',
     via:'EV/IO',
     formula:'Peso x 1',
     prescricao:'Diluir',
     complemento:' mL de SG25% em 1:1 mL de AD e administrar EV em bolus',
     filtro:p=>p.idade===0},

    {nome:'Gluconato de Cálcio 10% (9mgCa + 2/ml)',
     dose:'9mg/kg - Max 3g',
     via:'EV/IO',
     formula:'Peso x 1',
     prescricao:'Diluir',
     complemento:' mL em 1:1 mL de AD e administrar EV em bolus lento',
     filtro:null},

    {nome:'Bicarbonato de Sódio 8,4% (1mEq/mL)',
     dose:'1mEq/kg',
     via:'EV/IO',
     formula:'Peso x 1',
     prescricao:'Diluir',
     complemento:' mL em 1:1 mL de AD e administrar EV em bolus lento',
     filtro:null},

    {nome:'Atropina (0,25mg/mL)',
     dose:'0,02mg/kg - Max 1mg / Min 0,1mg',
     via:'EV/IO',
     formula:'Peso x 0,08',
     prescricao:'Administrar',
     complemento:' mL EV, em bolus.',
     filtro:null}
  ],

    intubacao: [
    {nome:'Atropina (0,25mg/mL)',
     dose:'0,01-0,02mg/kg - Max 1mg / Min 0,1mg',
     via:'EV/IO',
     formula:'Peso x 0,08',
     prescricao:'Administrar',
     complemento:' mL EV, em bolus.',
     filtro:null},

    {nome:'Atropina (0,25mg/mL)',
     dose:'0,02mg/kg',
     via:'IM',
     formula:'Peso x 0,08',
     prescricao:'Administrar',
     complemento:' mL IM.',
     filtro:null},

    {nome:'Lidocaína, cloridrato 2% (20mg/ml)',
     dose:'1-2mg/kg',
     via:'EV/IO',
     formula:'Peso x 0,05',
     prescricao:'Administrar',
     complemento:' mL EV, lento.',
     filtro:null},

    {nome:'Cetamina (50mg/ml)',
     dose:'2mg/kg',
     via:'EV/IO',
     formula:'Peso x 0,04',
     prescricao:'Administrar',
     complemento:' mL EV lento - 2min.',
     filtro:null},

    {nome:'Cetamina (50mg/ml)',
     dose:'3-5mg/kg',
     via:'IM',
     formula:'Peso x 0,06',
     prescricao:'Administrar',
     complemento:' mL IM.',
     filtro:null},

    {nome:'Fentanil (50mcg/mL)',
     dose:'2-4mcg/kg',
     via:'EV/IO',
     formula:'Peso x 0,04',
     prescricao:'Diluir',
     complemento:' mL em 3mL de AD, EV, lento',
     filtro:null},

    {nome:'Fentanil (50mcg/mL)',
     dose:'2-4mcg/kg',
     via:'IM',
     formula:'Peso x 0,04',
     prescricao:'Administrar',
     complemento:' mL IM.',
     filtro:null},

    {nome:'Midazolam (5mg/mL)',
     dose:'0,2-0,4mg/kg',
     via:'EV/IO',
     formula:'Peso x 0,04',
     prescricao:'Administrar',
     complemento:' mL EV lento.',
     filtro:null},

    {nome:'Midazolam (5mg/mL)',
     dose:'0,2-0,4mg/kg',
     via:'IM',
     formula:'Peso x 0,04',
     prescricao:'Administrar',
     complemento:' mL IM.',
     filtro:null},

    {nome:'Midazolam (5mg/mL)',
     dose:'0,2-0,4mg/kg',
     via:'IN',
     formula:'Peso x 0,04',
     prescricao:'Administrar',
     complemento:' mL, metade em cada narina',
     filtro:null},

    {nome:'Etomidato (2mg/mL)',
     dose:'0,2-0,4mg/kg - Max 20mg',
     via:'EV/IO',
     formula:'Peso x 0,1',
     prescricao:'Administrar',
     complemento:' mL EV, lento.',
     filtro:null},

    {nome:'Propofol (10mg/mL)',
     dose:'1-3mg/kg',
     via:'EV/IO',
     formula:'Peso x 0,1',
     prescricao:'Administrar',
     complemento:' mL EV, lento.',
     filtro:null},

    {nome:'Succinilcolina, Suxametônio (20mg/mL)',
     dose:'1-2mg/kg',
     via:'EV/IO',
     formula:'Peso x 0,05',
     prescricao:'Administrar',
     complemento:' mL EV em bolus. Max 7,5mL',
     filtro:null},

    {nome:'Succinilcolina, Suxametônio (20mg/mL)',
     dose:'2-4mg/kg',
     via:'IM',
     formula:'Peso x 0,1',
     prescricao:'Administrar',
     complemento:' mL IM.',
     filtro:null},

    {nome:'Rocurônio (10mg/mL)',
     dose:'1-1,2mg/kg',
     via:'EV/IO',
     formula:'Peso x 0,1',
     prescricao:'Administrar',
     complemento:' mL EV, em bolus.',
     filtro:null},

    {nome:'Pancurônio (2mg/mL)',
     dose:'0,1-0,2mg/kg',
     via:'EV/IO',
     formula:'Peso x 0,05',
     prescricao:'Administrar',
     complemento:' mL EV em bolus.',
     filtro:null}
  ],

    sedacao: [
    {nome:'Cetamina (50mg/ml)',
     dose:'0,5-2mg/kg',
     via:'EV/IO',
     formula:'Peso x 0,01',
     prescricao:'Administrar',
     complemento:' mL EV, lento.',
     filtro:null},

    {nome:'Cetamina (50mg/ml)',
     dose:'3-5mg/kg',
     via:'IM',
     formula:'Peso x 0,06',
     prescricao:'Administrar',
     complemento:' mL IM.',
     filtro:null},

    {nome:'Fentanil (50mcg/mL)',
     dose:'1-4mcg/kg',
     via:'EV/IO',
     formula:'Peso x 0,02',
     prescricao:'Diluir',
     complemento:' mL em 3mL de AD, EV, lento',
     filtro:null},

    {nome:'Fentanil (50mcg/mL)',
     dose:'1-4mcg/kg',
     via:'IM',
     formula:'Peso x 0,02',
     prescricao:'Administrar',
     complemento:' mL IM.',
     filtro:null},

    {nome:'Midazolam (5mg/mL)',
     dose:'0,05-0,1mg/kg',
     via:'EV/IO',
     formula:'Peso x 0,01',
     prescricao:'Administrar',
     complemento:' mL EV lento.',
     filtro:null},

    {nome:'Midazolam (5mg/mL)',
     dose:'0,1-0,2mg/kg',
     via:'IM',
     formula:'Peso x 0,02',
     prescricao:'Administrar',
     complemento:' mL IM.',
     filtro:null},

    {nome:'Midazolam (5mg/mL)',
     dose:'0,2-0,4mg/kg',
     via:'IN',
     formula:'Peso x 0,04',
     prescricao:'Administrar',
     complemento:' mL, metade em cada narina',
     filtro:null},

    {nome:'Morfina (10mg/mL)',
     dose:'0,05-0,1mg/kg',
     via:'EV/IO',
     formula:'Peso x 0,005',
     prescricao:'Diluir 1ml em 9mL de AD e administrar',
     complemento:' mL EV lento.',
     filtro:null}
  ],

    urgencias: [
    {nome:'Diazepam (5mg/mL)',
     dose:'0,2-0,5mg/kg - Max 5mg (<5a) / 10mg (>5a)',
     via:'EV',
     formula:'Peso x 0,04',
     prescricao:'Administrar',
     complemento:' mL EV, lento.',
     filtro:null},

    {nome:'Midazolam (5mg/mL)',
     dose:'0,2-0,5mg/kg',
     via:'EV/IO',
     formula:'Peso x 0,04',
     prescricao:'Administrar',
     complemento:' mL EV, lento.',
     filtro:null},

    {nome:'Midazolam (5mg/mL)',
     dose:'0,2-0,5mg/kg',
     via:'IN',
     formula:'Peso x 0,04',
     prescricao:'Administrar',
     complemento:' mL, metade em cada narina',
     filtro:null},

    {nome:'Fenobarbital (100mg/mL)',
     dose:'20-30mg/kg',
     via:'EV',
     formula:'Peso x 0,2',
     prescricao:'Diluir',
     complemento:' mL em 1:1mL SF0,9%, EV lento.',
     filtro:null},

    {nome:'Fenobarbital (100mg/mL)',
     dose:'20-30mg/kg',
     via:'IM',
     formula:'Peso x 0,2',
     prescricao:'Administrar',
     complemento:' mL IM.',
     filtro:null},

    {nome:'Fenitoína (50mg/mL)',
     dose:'20-30mg/kg',
     via:'EV',
     formula:'Peso x 0,4',
     prescricao:'Diluir',
     complemento:' mL em 1:1mL de SF0,9%, EV lento',
     filtro:null},

    {nome:'Tiopental (50mg/mL)',
     dose:'1-3mg/kg',
     via:'EV',
     formula:'Peso x 0,02',
     prescricao:'Diluir',
     complemento:' mL em 10mL de SG5%, EV, lento.',
     filtro:null},

    {nome:'Propofol (10mg/mL)',
     dose:'1mg/kg',
     via:'EV',
     formula:'Peso x 0,1',
     prescricao:'Administrar',
     complemento:' mL EV, lento.',
     filtro:null},

    {nome:'Manitol 20% (200mg/mL)',
     dose:'0,5-1g/kg',
     via:'EV',
     formula:'Peso x 2,5',
     prescricao:'Administrar',
     complemento:' mL EV, lento.',
     filtro:null}
  ],

    ritmo: [
    {nome:'Desfibrilação (NÃO SINCRONIZAR)',
     dose:'2J/kg – Max 10J/kg',
     via:'',
     formula:'Peso x 2',
     prescricao:'Aplicar',
     complemento:' Joules.',
     filtro:null},

    {nome:'Cardioversão (SINCRONIZAR)',
     dose:'0,5 - 1J/kg',
     via:'',
     formula:'Peso x 0,5',
     prescricao:'Aplicar',
     complemento:' Joules.',
     filtro:null},

    {nome:'Adenosina (3mg/mL)',
     dose:'0,1mg/kg - Max 6mg',
     via:'EV/IO',
     formula:'Peso x 0,03',
     prescricao:'Administrar',
     complemento:' mL EV em bolus seguido de flush SF0,9%. Max 2ml (1ªdose) / 4ml (2ª dose).',
     filtro:null},

    {nome:'Amiodarona (50mg/mL)',
     dose:'5mg/kg - Max 300mg',
     via:'EV/IO',
     formula:'Peso x 0,1',
     prescricao:'Diluir',
     complemento:' mL em 1:20mL SG5%, EV lento - 10min. Máx 6mL.',
     filtro:null},

    {nome:'Lidocaína, cloridrato 2% (20mg/mL)',
     dose:'1mg/kg',
     via:'EV/IO',
     formula:'Peso x 0,05',
     prescricao:'Administrar',
     complemento:' mL EV lento.',
     filtro:null},

    {nome:'Sulfato de Magnésio 50% (500mg/mL)',
     dose:'25-50mg/kg - Max 2g',
     via:'EV',
     formula:'Peso x 0,05',
     prescricao:'Diluir',
     complemento:' mL em 10mL de SG5%, EV lento. Máx 4mL.',
     filtro:null}
  ],

    bomba: [
    {nome:'Midazolam (5mg/mL)',
     dose:'< 32sem 0,03mg/kg/h',
     via:'EV',
     formula:'Peso x 0,006 x h',
     prescricao:'Diluir',
     complemento:' mL + 60ml SF0,9%,  (5ml/h 12h)',
     filtro:null},

    {nome:'Midazolam (5mg/mL)',
     dose:'1 a 6m 0,06mg/kg/h',
     via:'EV',
     formula:'Peso x 0,012 x h',
     prescricao:'Diluir',
     complemento:' mL + 60ml SF0,9%,  (5ml/h 12h)',
     filtro:null},

    {nome:'Midazolam (5mg/mL)',
     dose:'> 6m 0,06-0,12mg/kg/h',
     via:'EV',
     formula:'Peso x 0,012 x h',
     prescricao:'Diluir',
     complemento:' mL + 60ml SF0,9%,  (5ml/h 12h)',
     filtro:null},

    {nome:'Fentanil (50mcg/mL)',
     dose:'RN 0,5ug/kg/h',
     via:'EV',
     formula:'Peso x 0,01',
     prescricao:'Diluir',
     complemento:' mL + 60ml SF0,9%,  (5ml/h 12h)',
     filtro:null},

    {nome:'Fentanil (50mcg/mL)',
     dose:'> 1a 1-3ug/kg/h',
     via:'EV',
     formula:'Peso x 0,02',
     prescricao:'Diluir',
     complemento:' mL + 60ml SF0,9%,  (5ml/h 12h)',
     filtro:null}
  ],

  choques: [
    {nome:'Noraepinefrina (1mg/mL)',
     dose:'0,1mcg/kg/min. Máx: 2mcg',
     via:'EV',
     formula:'Peso x 0,0001 x 60 x h',
     prescricao:'Diluir',
     complemento:' mL + 6mL SG5%,  (0,5ml/h 12h)',
     filtro:null},

    {nome:'Dobutamina (12,5mg/mL)',
     dose:'2mcg/kg/min - Max 20mcg',
     via:'EV',
     formula:'Peso x 0,00016 x 60 x h',
     prescricao:'Diluir',
     complemento:' mL + 12mL SG5%,  (1ml/h 12h)',
     filtro:null},

    {nome:'Epinefrina (1mg/ml)',
     dose:'0,1mcg/kg/min - Max 1mcg',
     via:'EV',
     formula:'Peso x 0,0001 x 60 x h',
     prescricao:'Diluir',
     complemento:' mL + 6mL SF0,9%,  (0,5ml/h 12h)',
     filtro:null}
  ]
};  /* fim do const dadosTabelas */

    const dadosProced = [
  {idade:"RNPT", lamina:"Reta 00 - 0", tubo:"2.5", fixacao:"7 a 8",
   sonda:"4 ou 6"},

  {idade:"RNT", lamina:"Reta 0", tubo:"3", fixacao:"9 a 11",
   sonda:"6"},

  {idade:"6-11 meses", lamina:"Reta 1", tubo:"3.5", fixacao:"9 a 12",
   sonda:"6"},

  {idade:"1 ano", lamina:"Reta 1-2", tubo:"3,5-4", fixacao:"11 a 13,5",
   sonda:"6 ou 8"},

  {idade:"2-3 anos", lamina:"Reta/curva 2", tubo:"4-4,5", fixacao:"12 a 13,5",
   sonda:"8"},

  {idade:"4-5 anos", lamina:"Reta/curva 2", tubo:"4.5", fixacao:"13,5 a 15",
   sonda:"8"},

  {idade:"6-7 anos", lamina:"Reta/curva 2", tubo:"5", fixacao:"15 a 16,5",
   sonda:"10"},

  {idade:"8-9 anos", lamina:"Curva 2-3", tubo:"5.5", fixacao:"16,5 a 18",
   sonda:"10"},

  {idade:"10-11 anos", lamina:"Curva 2-3", tubo:"6", fixacao:"18 a 19,5",
   sonda:"12"},

  {idade:"12 anos", lamina:"Curva 3", tubo:"6.5", fixacao:"19,5 a 21",
   sonda:"12"},

  {idade:">12 anos", lamina:"Curva 3", tubo:"7-7,5", fixacao:"21 a 24",
   sonda:"12"}
];

    /* ================== FUNÇÕES PCR ================== */
let pcrTimerInterval = null, pcrSeconds = 0, pcrRunning = false;
let massageCycleInterval = null, massageCycleSeconds = 0, massageLog = [];
let adrenalinaInterval = null, adrenalinaSeconds = 0, adrenalinaLog = [];

function formatTime(secs) {
  let min = String(Math.floor(secs/60)).padStart(2,'0');
  let sec = String(secs%60).padStart(2,'0');
  return `${min}:${sec}`;
}
function togglePcrTimer(){
  if(!pcrRunning){
    pcrRunning=true;
    pcrTimerInterval=setInterval(()=>{
      pcrSeconds++;
      document.getElementById('pcrTimer').innerText=formatTime(pcrSeconds);
    },1000);
  }else{
    pcrRunning=false;
    clearInterval(pcrTimerInterval);
  }
}
function startMassageCycle(){
  clearInterval(massageCycleInterval);
  massageCycleSeconds=120;
  addMassageLog();
  updateMassageTimer();
  massageCycleInterval=setInterval(()=>{
    massageCycleSeconds--; updateMassageTimer();
    if(massageCycleSeconds<=0){
      clearInterval(massageCycleInterval);
      document.getElementById('currentMassageTimer').innerText="00:00";
    }
  },1000);
}
function updateMassageTimer(){
  document.getElementById('currentMassageTimer').innerText=formatTime(massageCycleSeconds);
}
function addMassageLog(){
  let now=new Date();
  massageLog.push(now.toLocaleTimeString());
  renderMassageLog();
}
function renderMassageLog(){
  let tbody=document.getElementById('massageLog');
  tbody.innerHTML="";
  massageLog.forEach((hora,idx)=>{
    let tr=document.createElement('tr');
    tr.innerHTML=`<td>${idx+1}</td><td>${hora}</td>`;
    tbody.appendChild(tr);
  });
}
function startAdrenalinaCycle(){
  clearInterval(adrenalinaInterval);
  adrenalinaSeconds=0;
  addAdrenalinaLog();
  updateAdrenalinaTimer();
  adrenalinaInterval=setInterval(()=>{
    adrenalinaSeconds++; updateAdrenalinaTimer();
  },1000);
}
function updateAdrenalinaTimer(){
  document.getElementById('adrenalinaTimer').innerText=formatTime(adrenalinaSeconds);
}
function addAdrenalinaLog(){
  let now=new Date();
  adrenalinaLog.push(now.toLocaleTimeString());
  renderAdrenalinaLog();
}
function renderAdrenalinaLog(){
  let tbody=document.getElementById('adrenalinaLog');
  tbody.innerHTML="";
  adrenalinaLog.forEach((hora,idx)=>{
    let tr=document.createElement('tr');
    tr.innerHTML=`<td>${idx+1}</td><td>${hora}</td>`;
    tbody.appendChild(tr);
  });
}
function finalizarAtendimento(){
  pcrRunning=false;
  clearInterval(pcrTimerInterval);
  clearInterval(massageCycleInterval);
  clearInterval(adrenalinaInterval);
  alert("Atendimento finalizado. Todos os cronômetros pausados!");
}
function reiniciarAtendimento(){
  pcrSeconds=0; massageCycleSeconds=0; adrenalinaSeconds=0;
  massageLog=[]; adrenalinaLog=[]; pcrRunning=false;
  clearInterval(pcrTimerInterval);
  clearInterval(massageCycleInterval);
  clearInterval(adrenalinaInterval);
  document.getElementById('pcrTimer').innerText="00:00";
  document.getElementById('currentMassageTimer').innerText="--:--";
  document.getElementById('adrenalinaTimer').innerText="--:--";
  document.getElementById('massageLog').innerHTML="";
  document.getElementById('adrenalinaLog').innerHTML="";
  document.getElementById('dosePCR').innerText="";
}

/* ================== FUNÇÃO PARA PREENCHER AS TABELAS ================== */
function atualizaTabelas(){
  let idadeRaw=document.getElementById("inputIdade").value;
  let pesoRaw=document.getElementById("inputPeso").value;
  let idade=idadeRaw?parseInt(idadeRaw):null;
  let peso=pesoRaw?parseFloat(pesoRaw):null;
  if(!peso||peso<=0){
    if(idade===0) peso=3.5;
    else if(idade!==null) peso=idade*2+8;
  }
  document.getElementById("msgPeso").textContent=
    peso>0?`Peso usado: ${peso.toFixed(2)} kg`:"Informe idade ou peso";

  ["ressuscitacao","intubacao","sedacao","urgencias","ritmo","bomba","choques"]
  .forEach(sec=>{
    let rows="";
    dadosTabelas[sec].forEach(med=>{
      if(med.filtro && !med.filtro({idade})) return;
      let val=parseFormula(med.formula,peso);
      rows+=`<tr><td>${med.nome}</td><td>${med.dose}</td><td>${med.via}</td><td>${med.prescricao} ${val} ${med.complemento||""}</td></tr>`;
    });
    document.getElementById(`box${sec.charAt(0).toUpperCase()+sec.slice(1)}`).innerHTML=rows;
  });

  let procRows="";
  dadosProced.forEach(p=>{
    let exibe=false;
    if(idade===0 && (p.idade==="RNPT"||p.idade==="RNT")) exibe=true;
    else if(idade>=13 && p.idade === ">12 anos") exibe=true;
    else if(p.idade.indexOf("-")>=0){
      let [min,max]=p.idade.split("-").map(x=>parseInt(x));
      if(!isNaN(min)&&(idade>=min && idade<=max)) exibe=true;
    }else{
      let val=parseInt(p.idade);
      if(val===idade)exibe=true;
    }
    if(exibe){
      procRows+=`<tr class="highlight"><td>${p.idade}</td><td>${p.lamina}</td><td>${p.tubo}</td><td>${p.fixacao}</td><td>${p.sonda}</td></tr>`;
    }
  });
  document.getElementById("boxProcedimento").innerHTML=procRows;
}
window.onload=atualizaTabelas;
</script>

</body>
</html>
