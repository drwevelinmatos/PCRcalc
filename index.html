<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>PueriCalc - Emergência Pediátrica</title>
  <link href="https://fonts.googleapis.com/css?family=Comfortaa:400,700&display=swap" rel="stylesheet"/>
  <style>
    body {
      font-family: 'Gotham Book','Comfortaa', Arial, sans-serif;
      padding: 20px;
      background: #ffffff;
      color: #2c3e50;
      margin: 0;
    }
    header { text-align: center; margin-bottom: 30px; }
    header img { max-width: 150px; }
    h1 {
      color: rgb(40,90,129);
      font-family: 'Comfortaa', Arial, sans-serif;
      text-align: center;
      margin-bottom: 30px;
    }
    h2 {
      color: rgb(40,90,129);
      font-family: 'Comfortaa', Arial, sans-serif;
      margin-top: 40px;
      margin-bottom: 15px;
      text-align: center;
    }
    h3 {
      color: rgb(40,90,129);
      font-family: 'Comfortaa', Arial, sans-serif;
      margin-top: 25px;
      margin-bottom: 8px;
    }
    label {
      font-weight: bold;
      display: block;
      margin-top: 15px;
      color: rgb(40,90,129);
    }
    input {
      font-family: 'Gotham Book','Comfortaa', Arial, sans-serif;
      padding: 10px; width: 100%; margin-top: 5px;
      border-radius: 4px; border: 1px solid #ccc;
      background: rgb(185,224,229);
      color: #2c3e50;
      box-sizing: border-box;
    }
    button {
      padding: 12px 20px;
      background: rgb(40,90,129);
      color: white;
      font-size: 15px;
      font-family: 'Comfortaa', Arial, sans-serif;
      border: none; border-radius: 6px; cursor: pointer;
      box-shadow: 0 2px 4px rgba(40,90,129,0.2);
      min-width: 160px;
    }
    button:hover { background: rgb(185,224,229); color: rgb(40,90,129);}
    .resultado {
      margin-top: 20px;
      padding: 15px;
      background: #fff;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-family: 'Gotham Book','Comfortaa', Arial, sans-serif;
      text-align: center;
    }
    /* Tabelas */
    table {
      width: 100%;
      border-collapse: collapse;
      background: #fff;
      margin-top: 15px;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 6px 8px;
      text-align: center;
      white-space: nowrap;   /* conteúdo em uma linha */
      overflow: hidden;
      text-overflow: ellipsis;
    }
    th {
      background: rgb(40,90,129);
      color: #fff;
      font-family: 'Comfortaa', Arial, sans-serif;
    }
    tr.highlight td {
      background: #ffe089;
      font-weight: bold;
    }
    /* Sessão PCR */
    fieldset {
      border: 2px solid rgb(185,224,229);
      border-radius: 10px;
      margin-top: 30px;
      padding: 20px;
      background: #f5fafd;
    }
    legend {
      font-weight: bold;
      color: rgb(40,90,129);
      font-family: 'Comfortaa', Arial, sans-serif;
      font-size: 1.2em;
      padding: 0 10px;
    }
    .pcr-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 15px 0;
    }
    .pcr-left {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    .pcr-right { text-align: right; }
    .timer, .timer2 {
      font-weight: bold;
      font-family: monospace;
      font-size: 1.4em;
      padding: 6px 15px;
      border-radius: 8px;
      min-width: 80px;
      text-align: center;
    }
    .timer   { background: rgb(40,90,129); color: #fff; }
    .timer2  { background: rgb(185,224,229); color: #163d55; }
    footer {
      margin-top: 40px;
      font-size: 12px;
      text-align: center;
      color: #555;
      border-top: 1px solid #ccc;
      padding-top: 15px;
      font-family: 'Comfortaa', Arial, sans-serif;
    }
  </style>
</head>
<body>

<header>
  <img src="IMG_4625.png" alt="Logo Dr. Wevelin Matos" />
</header>

<h1>Emergência Pediátrica - Calculadora de Doses</h1>

<label for="inputIdade">Idade (anos):</label>
<input type="number" id="inputIdade" min="0" max="18" step="1" oninput="atualizaTabelas()">
<label for="inputPeso">Peso (kg):</label>
<input type="number" id="inputPeso" min="0" step="0.1" placeholder="Preferencialmente informar peso" oninput="atualizaTabelas()">
<div id="msgPeso" class="info"></div>

<!-- Sessão PCR -->
<fieldset>
  <legend>Parada Cardiorrespiratória (PCR) - Cronômetros & Doses</legend>

  <div class="pcr-row">
    <div class="pcr-left">
      <button type="button" onclick="togglePcrTimer()">Start / Stop PCR</button>
      <span class="timer" id="pcrTimer">00:00</span>
    </div>
  </div>

  <div class="pcr-row">
    <div class="pcr-left">
      <button type="button" onclick="startMassageCycle()">Start Novo Ciclo Massagem</button>
      <span class="timer2" id="currentMassageTimer">--:--</span>
    </div>
  </div>

  <div class="pcr-row">
    <div class="pcr-left">
      <button type="button" onclick="startAdrenalinaCycle()">Adrenalina</button>
      <span class="timer2" id="adrenalinaTimer">--:--</span>
    </div>
  </div>

  <div class="pcr-row">
    <div class="pcr-left">
      <button type="button" onclick="finalizarAtendimento()">Finalizar Atendimento</button>
    </div>
    <div class="pcr-right">
      <button type="button" onclick="reiniciarAtendimento()">Reiniciar Atendimento</button>
    </div>
  </div>

  <div class="resultado" id="dosePCR"></div>

  <h3>Log de Ciclos de Massagem (2min):</h3>
  <table>
    <thead><tr><th>#</th><th>Início Ciclo (Hora)</th></tr></thead>
    <tbody id="massageLog"></tbody>
  </table>

  <h3>Log de Adrenalina:</h3>
  <table>
    <thead><tr><th>#</th><th>Horário Aplicação</th></tr></thead>
    <tbody id="adrenalinaLog"></tbody>
  </table>
</fieldset>

<!-- Aqui entram todas as seções de tabelas -->
<h2>Ressuscitação Cardiopulmonar</h2>
<table><thead><tr><th>Medicamento</th><th>Dose</th><th>Via</th><th>Prescrição Completa</th></tr></thead><tbody id="boxRessuscitacao"></tbody></table>

<h2>Intubação Traqueal</h2>
<table><thead><tr><th>Medicamento</th><th>Dose</th><th>Via</th><th>Prescrição Completa</th></tr></thead><tbody id="boxIntubacao"></tbody></table>

<h2>Sedação / Analgesia</h2>
<table><thead><tr><th>Medicamento</th><th>Dose</th><th>Via</th><th>Prescrição Completa</th></tr></thead><tbody id="boxSedacao"></tbody></table>

<h2>Urgências Neurológicas / Convulsão</h2>
<table><thead><tr><th>Medicamento</th><th>Dose</th><th>Via</th><th>Prescrição Completa</th></tr></thead><tbody id="boxUrgencias"></tbody></table>

<h2>Distúrbio de Ritmo</h2>
<table><thead><tr><th>Medicamento</th><th>Dose</th><th>Via</th><th>Prescrição Completa</th></tr></thead><tbody id="boxRitmo"></tbody></table>

<h2>Sedação em Bomba</h2>
<table><thead><tr><th>Medicamento</th><th>Dose</th><th>Via</th><th>Prescrição Completa</th></tr></thead><tbody id="boxBomba"></tbody></table>

<h2>Choques</h2>
<table><thead><tr><th>Medicamento</th><th>Dose</th><th>Via</th><th>Prescrição Completa</th></tr></thead><tbody id="boxChoques"></tbody></table>

<h2>Tabela de Procedimentos</h2>
<table><thead><tr><th>Idade</th><th>Lâmina Laringo</th><th>Tubo Traqueal</th><th>Fixação</th><th>Sonda Aspiração</th><th>Jelco</th><th>Dreno</th><th>Cateter</th><th>SVD</th></tr></thead><tbody id="boxProcedimento"></tbody></table>

<footer>
  <p><strong>Dr. Wevelin Matos</strong> | Pediatria e Cardiologia Pediátrica</p>
  <p>CRM/SP 196372 | (16) 99783-2383 | @dr.wevelinmatos</p>
  <p>Ribeirão Preto - SP</p>
</footer>

<script>
  /* ================= PCR TIMERS ================= */
  let pcrTimerInterval = null, pcrSeconds = 0, pcrRunning = false;
  let massageCycleInterval = null, massageCycleSeconds = 0, massageLog = [];
  let adrenalinaInterval = null, adrenalinaSeconds = 0, adrenalinaLog = [];

  function formatTime(secs) {
    let min = String(Math.floor(secs / 60)).padStart(2, '0');
    let sec = String(secs % 60).padStart(2, '0');
    return `${min}:${sec}`;
  }
  function togglePcrTimer() {
    if (!pcrRunning) {
      pcrRunning = true;
      pcrTimerInterval = setInterval(() => {
        pcrSeconds++;
        document.getElementById('pcrTimer').innerText = formatTime(pcrSeconds);
      }, 1000);
    } else {
      pcrRunning = false;
      clearInterval(pcrTimerInterval);
    }
  }
  function startMassageCycle() {
    clearInterval(massageCycleInterval);
    massageCycleSeconds = 120;
    addMassageLog();
    updateMassageTimer();
    massageCycleInterval = setInterval(() => {
      massageCycleSeconds--;
      updateMassageTimer();
      if (massageCycleSeconds <= 0) {
        clearInterval(massageCycleInterval);
        document.getElementById('currentMassageTimer').innerText = "00:00";
      }
    }, 1000);
  }
  function updateMassageTimer() {
    document.getElementById('currentMassageTimer').innerText = formatTime(massageCycleSeconds);
  }
  function addMassageLog() {
    let now = new Date();
    massageLog.push(now.toLocaleTimeString());
    renderMassageLog();
  }
  function renderMassageLog() {
    let tbody = document.getElementById('massageLog');
    tbody.innerHTML = "";
    massageLog.forEach((hora, idx) => {
      let tr = document.createElement('tr');
      tr.innerHTML = `<td>${idx + 1}</td><td>${hora}</td>`;
      tbody.appendChild(tr);
    });
  }
  function startAdrenalinaCycle() {
    clearInterval(adrenalinaInterval);
    adrenalinaSeconds = 0;
    addAdrenalinaLog();
    updateAdrenalinaTimer();
    adrenalinaInterval = setInterval(() => {
      adrenalinaSeconds++;
      updateAdrenalinaTimer();
    }, 1000);
  }
  function updateAdrenalinaTimer() {
    document.getElementById('adrenalinaTimer').innerText = formatTime(adrenalinaSeconds);
  }
  function addAdrenalinaLog() {
    let now = new Date();
    adrenalinaLog.push(now.toLocaleTimeString());
    renderAdrenalinaLog();
  }
  function renderAdrenalinaLog() {
    let tbody = document.getElementById('adrenalinaLog');
    tbody.innerHTML = "";
    adrenalinaLog.forEach((hora, idx) => {
      let tr = document.createElement('tr');
      tr.innerHTML = `<td>${idx + 1}</td><td>${hora}</td>`;
      tbody.appendChild(tr);
    });
  }
  function finalizarAtendimento() {
    pcrRunning = false;
    clearInterval(pcrTimerInterval);
    clearInterval(massageCycleInterval);
    clearInterval(adrenalinaInterval);
    alert("Atendimento finalizado. Todos os cronômetros pausados!");
  }
  function reiniciarAtendimento() {
    pcrSeconds = 0;
    massageCycleSeconds = 0;
    adrenalinaSeconds = 0;
    massageLog = [];
    adrenalinaLog = [];
    pcrRunning = false;
    clearInterval(pcrTimerInterval);
    clearInterval(massageCycleInterval);
    clearInterval(adrenalinaInterval);
    document.getElementById('pcrTimer').innerText = "00:00";
    document.getElementById('currentMassageTimer').innerText = "--:--";
    document.getElementById('adrenalinaTimer').innerText = "--:--";
    document.getElementById('massageLog').innerHTML = "";
    document.getElementById('adrenalinaLog').innerHTML = "";
    document.getElementById('dosePCR').innerText = "";
  }

  /* ================ CÁLCULOS E TABELAS ================ */
  function parseFormula(formula, peso){
    if(!peso || !formula) return "--";
    let f = formula.replace(/,/g,".").toLowerCase();
    let m = f.match(/peso x ([0-9.]+)/);
    if(m) return (peso * parseFloat(m[1])).toFixed(2).replace(".",",");
    return "--";
  }

  const dadosTabelas = {
    ressuscitacao: [
      {nome:'Adrenalina 1:1000 (1mg/ml) – Pediatria',dose:"0,01mg/kg - Max 1mg",via:'EV/IO',formula:'Peso x 0,1',prescricao:'Administrar',complemento:' mL EV em bolus.'}
    ],
    intubacao: [
      {nome:'Atropina (0,25mg/mL)',dose:'0,02mg/Kg',via:'EV/IO',formula:'Peso x 0,08',prescricao:'Administrar',complemento:' mL EV em bolus.'}
    ],
    sedacao: [
      {nome:'Midazolam (5mg/mL)',dose:'0,05mg/Kg',via:'EV/IO',formula:'Peso x 0,01',prescricao:'Administrar',complemento:' mL EV lento.'}
    ],
    urgencias: [
      {nome:'Diazepam (5mg/mL)',dose:'0,2-0,5mg/Kg',via:'EV',formula:'Peso x 0,04',prescricao:'Administrar',complemento:' mL EV lento.'}
    ],
    ritmo: [
      {nome:'Desfibrilação',dose:'2J/Kg',via:'',formula:'Peso x 2',prescricao:'Aplicar',complemento:' Joules.'}
    ],
    bomba: [
      {nome:'Midazolam (5mg/mL)',dose:'0,06mg/kg/h',via:'EV',formula:'Peso x 0,012',prescricao:'Diluir',complemento:' mL + SF0,9%'}
    ],
    choques: [
      {nome:'Dobutamina (12,5mg/mL)',dose:'2mcg/kg/min',via:'EV',formula:'Peso x 0,00016 x 60',prescricao:'Diluir',complemento:' mL + SG5%'}
    ]
  };

  const dadosProced = [
    {idade:"1 ano",lamina:"Reta 1-2",tubo:"3,5-4",fixacao:"11-13",sonda:"6",jelco:"18",dreno:"16",cateter:"4F",svd:"8"}
  ];

  function atualizaTabelas() {
    let idadeRaw = document.getElementById("inputIdade").value;
    let pesoRaw = document.getElementById("inputPeso").value;
    let idade = idadeRaw ? parseInt(idadeRaw) : null;
    let peso = pesoRaw ? parseFloat(pesoRaw) : null;
    if (!peso || peso <= 0) {
      if (idade === 0) peso = 3.5;
      else if (idade !== null) peso = idade * 2 + 8;
    }
    document.getElementById("msgPeso").textContent =
      peso > 0 ? `Peso usado: ${peso.toFixed(2)} kg` : "Informe idade ou peso";

    ["ressuscitacao","intubacao","sedacao","urgencias","ritmo","bomba","choques"].forEach(sec=>{
      let rows="";
      dadosTabelas[sec].forEach(med=>{
        let val = parseFormula(med.formula,peso);
        rows+=`<tr><td>${med.nome}</td><td>${med.dose}</td><td>${med.via}</td><td>${med.prescricao} ${val} ${med.complemento||""}</td></tr>`;
      });
      document.getElementById(`box${sec.charAt(0).toUpperCase()+sec.slice(1)}`).innerHTML=rows;
    });

    let procRows = "";
    dadosProced.forEach(p=>{
      if(idade===1){
        procRows+=`<tr class="highlight"><td>${p.idade}</td><td>${p.lamina}</td><td>${p.tubo}</td><td>${p.fixacao}</td><td>${p.sonda}</td><td>${p.jelco}</td><td>${p.dreno}</td><td>${p.cateter}</td><td>${p.svd}</td></tr>`;
      }
    });
    document.getElementById("boxProcedimento").innerHTML=procRows;
  }

  window.onload=atualizaTabelas;
</script>

</body>
</html>


